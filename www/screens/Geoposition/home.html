<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../ui-kit/css/bootstrap.css">
    <link rel="stylesheet" href="../../ui-kit/css/styles.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../../ui-kit/css/leaflet.css" />
    <link rel="stylesheet" href="../../ui-kit/css/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="../../ui-kit/css/MarkerCluster.css" />
    <link rel="stylesheet" href="../../ui-kit/css/MarkerCluster.Default.css" />
    <script src="../../ui-kit/js/leaflet.js"></script>
    <script src="../../ui-kit/js/leaflet-routing-machine.js"></script>
    <script src="../../ui-kit/js/leaflet.markercluster.js"></script>
    <script src="../../ui-kit/js/elasticlunr.js"></script>
    <script src="../../ui-kit/js/lunr.stemmer.support.js"></script>
    <script src="../../ui-kit/js/lunr.ru.js"></script>
    <title>Home</title>
</head>

<body onload="update_zoom()" style="z-index: -2;">
    <div id="map" style="z-index: 0">
    </div>
    <div id="icons-here">
        <!--        <div style="top: 30%;right: 20%" class="my-position d-flex justify-content-center align-items-center">-->
        <!--            <div class="orange-circle"></div>-->
        <!--        </div>-->
        <!--        <div style="top:30%;left:40%;" class="position-fixed">-->
        <!--            <a href="#" onclick="collapse_toggle()">-->
        <!--                <div class="geopoint d-flex justify-content-center align-items-center pb-2 ">-->
        <!--                    <div class="dog-img"></div>-->
        <!--                </div>-->
        <!--            </a>-->
        <!--        </div>-->
    </div>
    <footer class="nav-bar">
        <button class="nav-bar__element active" onclick="location.href='#'">
            <img src="../../ui-kit/svg/orange_search.svg" alt="search_ico" class="nav-bar__element__icon">
            <div class="nav-bar__element__title">Поиск</div>
        </button>
        <button class="nav-bar__element" onclick="location.href='../Profile-main/profile-main.html'">
            <img src="../../ui-kit/svg/profile_icon.svg" alt="search_ico" class="nav-bar__element__icon">
            <div class="nav-bar__element__title">Профиль</div>
        </button>
        <button class="nav-bar__element" onclick="location.href='../Routes/routes.html'">
            <img src="../../ui-kit/svg/routes_grey.svg" alt="search_ico" class="nav-bar__element__icon">
            <div class="nav-bar__element__title">Маршруты</div>
        </button>
    </footer>
    <div class="search-bar-wrapper" style="z-index: 10;">
        <div class="search-bar d-inline-flex justify-content-between align-items-center container-fluid">
            <div id="search-icon" class="grey-search-icon" onclick="search_history_close()"></div>
            <div class="w-100"><input onclick="search_history_open()" type="email" class="form-control" id="line-edit"
                    placeholder="Поиск..."></div>
            <div><a href="#">
                    <div class="menu-icon"></div>
                </a></div>
        </div>
    </div>
    <div class="buttons-bar h-100 d-flex flex-column align-items-center justify-content-center" style="z-index: 2;">
        <div id="zoomControl">
            <div class="mb-2">
                <button class="btn btn-hollow btn-gps btn-plus" onclick="zoomin()">
                </button>
            </div>
            <div class="mb-5">
                <button class="btn btn-hollow btn-gps btn-minus" onclick="zoomout()">
                </button>
            </div>
        </div>
        <div>
            <button class="btn btn-hollow btn-gps" onclick="get_location()">
            </button>
        </div>
    </div>
    <div id="info">
        <div class="geopoint-popup d-flex flex-column justify-content-center align-items-center">
            <div onclick="location.href='../GeoInfo/geo_info.html'"
                class="geopoint-info d-flex align-items-center justify-content-between p-3">
                <div class="d-flex flex-column me-3">
                    <div>
                        <h3 class="text-bold" id="info-name">Памятник медведю "Символ России, легенда Ярославля"</h3>
                    </div>
                    <div>
                        <h3 class="text-description">Россия, Ярославль, улица Которосльная набережная</h3>
                    </div>
                    <div>
                        <h3 class="text-description">0,6 km от вас</h3>
                    </div>
                </div>
                <div class="geopoint-photo"></div>
            </div>
            <div class="reviews d-inline-flex justify-content-between p-2">
                <div class="d-inline-flex justify-content-center align-items-center me-4">
                    <div class="d-inline-flex justify-content-center align-items-center">
                        <div style="margin-right: 10px;">
                            <h3 class="text-attention">4,9</h3>
                        </div>
                        <div class="d-flex flex-column">
                            <div class="d-inline-flex">
                                <div class="rate-icon"></div>
                                <div class="rate-icon"></div>
                                <div class="rate-icon"></div>
                                <div class="rate-icon"></div>
                                <div class="rate-icon"></div>
                            </div>
                            <div>
                                <p class="text-common">6 оценок</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center align-items-center mx-1 w-100">
                    <button class="btn btn-filled h-auto">
                        <p class="btn-text"><img src="../../ui-kit/svg/white_gps.svg"> Построить маршрут</p>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="info2">
        <div id='popup-wrapper' class="position-fixed" style="z-index: 3;bottom:0; width:100%;">
            <div onclick='toggle_collapse()' class="near-popup d-inline-flex justify-content-between align-items-center">
                <div class="dog-img-big"></div>
                <div id='near-popup-text' style='display:flex;' class="justify-content-center align-items-center h-100">
                    <div class="d-flex flex-column">
                        <div>
                            <h3 class="text-bold">Вы рядом с меткой!</h3>
                        </div>
                        <div>
                            <h3 class="text-description">Памятник медведю "Символ России, легенда Ярославля"</h3>
                        </div>
                    </div>
                </div>
            </div>
            <div id='inner-reviews' class="reviews">
                <div class="justify-content-center align-items-center w-100 p-3">
                    <button id='excursion-btn' class="btn btn-filled" onclick="location.href='../ExcursionStart/ExcursionStart.html'">
                        <p class="btn-text">Начать экскурсию</p>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="search-history">
        <div class="search-history">
            <div class="d-flex flex-column px-2" id="search-results1">
                <!--                <div><a href="#">-->
                <!--                    <div class="bg-white w-100 d-inline-flex align-items-center p-2">-->
                <!--                        <div class="time-icon me-3"></div>-->
                <!--                        <div><h3 class="text-common">Свободы</h3></div>-->
                <!--                    </div>-->
                <!--                </a></div>-->
                <!--                <div><a href="#">-->
                <!--                    <div class="bg-white w-100 d-inline-flex p-2">-->
                <!--                        <div class="time-icon me-3"></div>-->
                <!--                        <div><h3 class="text-common">Миллениум</h3></div>-->
                <!--                    </div>-->
                <!--                </a></div>-->
            </div>
        </div>
    </div>
    <script>
        var opened = false;
        var popup_collapsed = false;
        var park_id = 0;
        function toggle_collapse(){
        	if(popup_collapsed){
				setTimeout(()=>{
					document.getElementsByClassName('near-popup')[0].style.borderBottom = '2px solid rgba(243, 243, 243, 1)';
	        		document.getElementById('near-popup-text').style.display = 'flex';
					document.getElementById('inner-reviews').style.display = 'block';
					document.getElementById('popup-wrapper').style.bottom = '0px';
				},300);
				document.getElementById('popup-wrapper').style.width = '100%';

        	}else{
				setTimeout(()=>{				
        			document.getElementsByClassName('near-popup')[0].style.borderBottom = '0'; 
	        		document.getElementById('near-popup-text').style.display = 'none';
					document.getElementById('inner-reviews').style.display = 'none';
					document.getElementById('popup-wrapper').style.bottom = '82px';
				},600);
				document.getElementById('popup-wrapper').style.width = '140px';	
        	}
        	popup_collapsed = !popup_collapsed;
        }
        function search_history_open() {
            document.getElementById('search-history').style.display = 'block';
            document.getElementById('search-icon').classList.add('grey-close-icon');
            document.getElementById('search-icon').classList.remove('grey-search-icon');
        }
        function search_history_close() {
            document.getElementById('search-history').style.display = 'none';
            document.getElementById('search-icon').classList.remove('grey-close-icon');
            document.getElementById('search-icon').classList.add('grey-search-icon');
        }
        function collapse_open() {
            document.getElementById("info").style.display = 'block';
            document.getElementById('info-name').innerHTML = locs[park_id][2];
        }
        function collapse_close() {
            document.getElementById("info").style.display = 'none';
        }
        function collapse_toggle(park) {
            opened = !opened;
            opened ? collapse_open() : collapse_close();
            park_id = park;
            console.log(park);
            if (localStorage != undefined) {
                localStorage.setItem('prev_place', park_id);
            }
        }
        function update_zoom() {
            if (localStorage != undefined) {
                if (localStorage.getItem('zoomControl') == 'true') {
                    document.getElementById('zoomControl').style.display = 'block';
                } else {
                    document.getElementById('zoomControl').style.display = 'none';
                }
            }
        }
        if (localStorage != undefined) {
            localStorage.setItem('prev_page', '../../screens/Geoposition/home.html');
        }
        function make_request() {
            cordovaHTTP.post("https://park.backend.xredday.ru/",
                { 'request': { "action": "login", "data": { "login": "l", "pass": "l" } } },
                {}, function (response) {
                    // prints 200
                    console.log(response.status);
                    try {
                        console.log(response.data);
                    } catch (e) {
                        console.error("JSON parsing error");
                    }
                }, function (response) {
                    // prints 403
                    console.log(response.status);

                    //prints Permission denied
                    console.log(response.data);
                });
        }
    </script>
    <script src="../../cordova.js"></script>
    <script src="../../ui-kit/js/geopoints.js"></script>
    <script src="../../ui-kit/js/map.js"></script>
</body>

</html>
